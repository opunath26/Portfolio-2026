{"ast":null,"code":"\"use client\";\n\nimport { useRef, useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n * Returns a cleanup function if the ref callback returns one (React 19 feature)\n */\nfunction setRef(ref, value) {\n  if (typeof ref === \"function\") {\n    return ref(value);\n  } else if (isRefObject(ref)) {\n    ref.current = value;\n  }\n}\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  // Store the cleanup function from external ref if it returns one\n  const externalRefCleanupRef = useRef(null);\n  return useCallback(instance => {\n    if (instance) {\n      visualState.onMount && visualState.onMount(instance);\n    }\n    if (visualElement) {\n      if (instance) {\n        visualElement.mount(instance);\n      } else {\n        visualElement.unmount();\n      }\n    }\n    if (externalRef) {\n      if (instance) {\n        // Mount: call the external ref and store any cleanup function\n        const cleanup = setRef(externalRef, instance);\n        if (typeof cleanup === \"function\") {\n          externalRefCleanupRef.current = cleanup;\n        }\n      } else {\n        // Unmount: call stored cleanup function if available, otherwise call ref with null\n        if (externalRefCleanupRef.current) {\n          externalRefCleanupRef.current();\n          externalRefCleanupRef.current = null;\n        } else {\n          // Fallback to React <19 behavior for refs that don't return cleanup\n          setRef(externalRef, instance);\n        }\n      }\n    }\n  },\n  /**\n   * Include all dependencies to ensure the callback updates correctly\n   */\n  [visualElement, visualState, externalRef]);\n}\nexport { useMotionRef };","map":{"version":3,"names":["setRef","ref","value","isRefObject","current","externalRefCleanupRef","useRef","useCallback","instance","visualElement","mount","cleanup","externalRef","visualState"],"sources":["C:\\Projects\\Portfolio-2026\\node_modules\\framer-motion\\src\\motion\\utils\\use-motion-ref.ts"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { useCallback, useRef } from \"react\"\nimport type { VisualElement } from \"../../render/VisualElement\"\nimport { isRefObject } from \"../../utils/is-ref-object\"\nimport { VisualState } from \"./use-visual-state\"\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n * Returns a cleanup function if the ref callback returns one (React 19 feature)\n */\nfunction setRef<T>(ref: React.Ref<T>, value: T): void | (() => void) {\n    if (typeof ref === \"function\") {\n        return ref(value)\n    } else if (isRefObject(ref)) {\n        ;(ref as any).current = value\n    }\n}\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nexport function useMotionRef<Instance, RenderState>(\n    visualState: VisualState<Instance, RenderState>,\n    visualElement?: VisualElement<Instance> | null,\n    externalRef?: React.Ref<Instance>\n): React.Ref<Instance> {\n    // Store the cleanup function from external ref if it returns one\n    const externalRefCleanupRef = useRef<(() => void) | null>(null)\n\n    return useCallback(\n        (instance: Instance) => {\n            if (instance) {\n                visualState.onMount && visualState.onMount(instance)\n            }\n\n            if (visualElement) {\n                if (instance) {\n                    visualElement.mount(instance)\n                } else {\n                    visualElement.unmount()\n                }\n            }\n\n            if (externalRef) {\n                if (instance) {\n                    // Mount: call the external ref and store any cleanup function\n                    const cleanup = setRef(externalRef, instance)\n                    if (typeof cleanup === \"function\") {\n                        externalRefCleanupRef.current = cleanup\n                    }\n                } else {\n                    // Unmount: call stored cleanup function if available, otherwise call ref with null\n                    if (externalRefCleanupRef.current) {\n                        externalRefCleanupRef.current()\n                        externalRefCleanupRef.current = null\n                    } else {\n                        // Fallback to React <19 behavior for refs that don't return cleanup\n                        setRef(externalRef, instance)\n                    }\n                }\n            }\n        },\n        /**\n         * Include all dependencies to ensure the callback updates correctly\n         */\n        [visualElement, visualState, externalRef]\n    )\n}\n"],"mappings":";;;;;AAQA;;;;AAIG;AACH,SAAAA,OAAAC,GAAA,EAAAC,KAAA;EACI,WAAAD,GAAA;IACI,OAAAA,GAAA,CAAAC,KAAA;SACG,IAAAC,WAAA,CAAAF,GAAA;IACDA,GAAA,CAAAG,OAAA,GAAAF,KAAA;;AAEV;AAEA;;;AAGG;;;EAOC,MAAAG,qBAAA,GAAAC,MAAA;EAEA,OAAAC,WAAA,CAAAC,QAAA;;;;;;QAQgBC,aAAA,CAAAC,KAAA,CAAAF,QAAA;;;;;;;;;QAUA,WAAAG,OAAA;UACIN,qBAAA,CAAAD,OAAA,GAAAO,OAAA;;;;QAIJ,IAAAN,qBAAA,CAAAD,OAAA;;UAEIC,qBAAA,CAAAD,OAAA;;;UAGAJ,MAAA,CAAAY,WAAA,EAAAJ,QAAA;;;;;EAKhB;;AAEG;EACH,CAAAC,aAAA,EAAAI,WAAA,EAAAD,WAAA;AAER","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}